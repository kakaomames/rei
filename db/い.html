<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>JSファイル整形ツール</title><style>body{font-family:sans-serif;padding:20px;line-height:1.6;}#message{margin-top:20px;font-weight:bold;color:#333;}#processButton{padding:10px 20px;cursor:pointer;background-color:#007bff;color:white;border:none;border-radius:5px;}#processButton:disabled{background-color:#cccccc;cursor:not-allowed;}.success{color:#28a745;}.error{color:#dc3545;}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify.min.js"></script>
</head><body><h1>JS 整形ツール (Beautifier)</h1><input type="file" id="fileInput" accept=".js,.txt"><button id="processButton" disabled>ファイルを整形してダウンロード</button><div id="message"></div><script>const fileInput=document.getElementById('fileInput'),processButton=document.getElementById('processButton'),message=document.getElementById('message');fileInput.addEventListener('change',()=>{processButton.disabled=fileInput.files.length===0;message.textContent=fileInput.files.length>0?`${fileInput.files[0].name}が選択されました。`:'';});function downloadFile(e,t,o){const n=new Blob([e],{type:o}),r=URL.createObjectURL(n),l=document.createElement('a');l.href=r;l.download=t;document.body.appendChild(l);l.click();document.body.removeChild(l);URL.revokeObjectURL(r);}processButton.addEventListener('click',()=>{const e=fileInput.files[0];if(!e){message.textContent='エラー:ファイルを選択してください。';message.className='error';return;}if(typeof window.js_beautify==='undefined'){message.textContent='エラー:整形ライブラリが読み込まれていません。インターネット接続を確認してください。';message.className='error';return;}const t=new FileReader();t.onload=function(t){const o=t.target.result;try{
        // js_beautifyを使用してコードを整形（インデントサイズ4）
        const n=window.js_beautify(o,{indent_size:4,space_in_empty_paren:true}),
        r=e.name.replace(/(\.[^.]+)$/,'_beautified$1');downloadFile(n,r,'application/octet-stream');message.textContent=`✅成功！整形された${r}をダウンロードしました。`;message.className='success';}catch(e){message.textContent=`処理中にエラーが発生しました:${e.message}`;message.className='error';console.error(e);}};t.readAsText(e);});</script></body></html>
